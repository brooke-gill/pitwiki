<!DOCTYPE html>
<!-- Not generated by Pit Markdown: https://pit.wiki/PitMD -->
<html> 
<head>
<link rel="stylesheet" href="/stylesheet.css?v=51">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Search  - The Hypixel Pit Wiki</title>
<meta name="description" content="">
<meta name="author" content="null">
<meta name="keywords" content="Hypixel Pit Wiki, Pit Search">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/x-icon" href="/favicon/favicon.ico">
<script type="text/javascript" src="./jquery-3.6.3.min.js"></script>
<script> 
$(function(){
  $("#header").load("header.html"); 
  $("#footer").load("footer.html"); 
});
</script>
</head>
<body>
<div id="header"></div>
<div class="box">
<span class="body">
<span class="subheader"><span style="font-style: normal;">&#x1F50E;&#xFE0E; Search results</span></span>
<hr>
<input type="text" class="searchbar" onkeypress="search()" id="pagesearchbar" placeholder="&#x1F50E;&#xFE0E; Search for text...">
<p id="guide">Search for text inside articles by typing in the box above. Press <kbd>Enter</kbd> to search.</p>
<div id="result"></div>

</span></div>
<div id="footer"></div>
</body>
</html>

<script>
    function strip(html){
        let doc = new DOMParser().parseFromString(html, 'text/html');
        return doc.body.textContent || "";
    }

    var articles = ["2x_Rewards.html","404.html","Abyss.html","Achievements.html","Aqua_Pants.html","Archangel_Chestplate.html","Armageddon_Boots.html","Auction.html","Beast.html","Beastmode.html","Blockhead.html","Bounty.html","Care_Package.html","Castle.html","Chunk_of_Vile.html","Commands.html","Contracts.html","Corals.html","Credits.html","Dark_Pants.html","Dragon_Egg.html","Elements.html","Ender_Chest.html","Everyone_Gets_a_Bounty.html","Factions.html","Fishing.html","Four_Seasons.html","Funky_Feather.html","Genesis.html","Giant_Cake.html","Gold.html","Golden_Helmet.html","Hermit.html","Highlander.html","Item_Shop.html","Killstreaks.html","King_of_the_Hill.html","King_of_the_Ladder.html","Kings_Quest.html","Level.html","Magnum_Opus.html","Major_Event.html","Maps.html","Mark_of_Recon_Essence.html","Megastreaks.html","Mini_Cake.html","Minor_Event.html","Mystic_Bow.html","Mystic_Pants.html","Mystic_Repair_Kit.html","Mystic_Sword.html","Mystic_Well.html","NPCs.html","Night_Quests.html","Overdrive.html","Page_List.html","Passives.html","Perks.html","Philosophers_Cactus.html","PitMD.html","Pit_Day.html","Pit_Supporter.html","Pizza.html","Prestige.html","Preview.html","Quests.html","Quick_Maths.html","Quick_Patch_Notes.html","Raffle.html","Rage_Pants.html","Rage_Pit.html","Random_Page.html","Renown.html","Robbery.html","Sample.html","Sewer_Pants.html","Sewers.html","Spire.html","Squads.html","Stash.html","Stats.html","Team_Deathmatch.html","The_Hypixel_Pit.html","The_Pit_0.1.html","The_Pit_0.2.html","The_Pit_0.3.1.html","The_Pit_0.3.5.html","The_Pit_0.3.6.html","The_Pit_0.3.7.html","The_Pit_0.3.html","The_Pit_1.0.3.html","The_Pit_1.0.5.html","The_Pit_1.0.6.html","Tiny_post-update_patch.html","To_the_Moon.html","Totally_Legit_Gem.html","Translator.html","Uberstreak.html","XP.html","footer.html","header.html","index.html",]

    var blacklist = ["jquery-3.6.3.min.js",   "pages.js",   "sitemap.xml",   "sitemap_20220729.txt",   "stylesheet.css", "Translator.html", "favicon.ico", "404.html", "Page_List.html", "PitMD.html", "scraper.html", "README.md", "footer.html", "header.html", "Abyss.html", "Sample.html", "Preview.html", "Random_Page.html", "Search.html"]

    console.log(articles.length);
    for(c = articles.length - 1; c >= 0; c--) {
        if(blacklist.indexOf(articles[c]) != -1) articles.splice(c, 1);
    }
    console.log(articles);

    var articletext = [];
    var articletitles = [];
    var articletextlowercase = [];

    Promise.all(
    articles.map(article => fetch(article).then(e => e.text()))
    )
    .then(texts => {
        articletext = texts;
        console.log("done");
        for(d = 0; d < articletext.length; d++) {
            articletitles[d] = articletext[d].match(/<title>.*<\/title>/g)[0].replace(/ - The Hypixel Pit Wiki|<\/?title>/g, "");
            articletext[d] = strip(articletext[d].replace(/<\/td><td>|<\/tr><tr>| {2,}/g, " ")).replace(/\n/g, " ");
            articletextlowercase[d] = articletext[d].toLowerCase();
        }
        let here = new URL(window.location.href);
        if(here.searchParams.get('param') != null) {
            document.getElementById("pagesearchbar").value = here.searchParams.get('param');
            search(undefined,true);
        }
    })
    .catch(error => console.log(error));

    function search(keyword = document.getElementById("pagesearchbar").value, bypass = false) {
        if(bypass || event.key == "Enter") {
            document.getElementById("result").innerHTML = "";
            if(keyword == "") {
                document.getElementById("guide").innerHTML = "Search for text inside articles by typing in the box above. Press <kbd>Enter</kbd> to search.";
            }
            else {
                truekeyword = keyword;
                keyword = keyword.toLowerCase();
                var results = [];
                for(b = 0; b < articletext.length; b++) {
                    var matches = articletextlowercase[b].split(keyword).length - 1;
                    if(matches > 0) results.push([articles[b], matches, b, articletextlowercase[b].indexOf(keyword)]);
                }
                results.sort(function(a,b) {
                    return b[1]-a[1]
                });

                var resultcount = 0;

                for(e = 0; e < results.length; e++) {
                    selection = results[e];
                    correctarticle = articletext[selection[2]];
                    resultcount += selection[1];

                    document.getElementById("result").innerHTML += `<b><a href="` + selection[0] + `">` + (articletitles[selection[2]]) + "</a></b> (" + selection[1].toLocaleString() + (selection[1]==1?" result":" results") + ")<br>..." + (correctarticle.substring(selection[3] - 50, selection[3])) + `<span class="searchresult">` + correctarticle.substring(selection[3], selection[3] + keyword.length) + "</span>" + correctarticle.substring(selection[3] + keyword.length, selection[3] + 50) + "...<br><br>";
                }
                if(results.length == 0) document.getElementById("guide").innerText = `No results found for ` + truekeyword + " :(";
                else document.getElementById("guide").innerHTML = "Found <b>" + resultcount.toLocaleString() + "</b> results" + (results.length == 1?".":" across " + results.length + " articles.");
                return results;
            }
        }
    }


</script>